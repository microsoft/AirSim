<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Flight Controller - AirSim</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Flight Controller";
    var mkdocs_page_input_path = "docs\\flight_controller.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> AirSim</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../CHANGELOG/">Whats New</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Get AirSim</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../use_precompiled/">Download Binaries</a>
                </li>
                <li class="">
                    
    <a class="" href="../build_windows/">Build on Windows</a>
                </li>
                <li class="">
                    
    <a class="" href="../build_linux/">Build on Linux</a>
                </li>
                <li class="">
                    
    <a class="" href="../unreal_custenv/">Creating Custom Environment</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Using AirSim</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../apis/">Core APIs</a>
                </li>
                <li class="">
                    
    <a class="" href="../image_apis/">Image APIs</a>
                </li>
                <li class="">
                    
    <a class="" href="../apis_cpp/">C++ APIs</a>
                </li>
                <li class="">
                    
    <a class="" href="../dev_workflow/">Development Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../settings/">Settings</a>
                </li>
                <li class="">
                    
    <a class="" href="../camera_views/">Camera Views</a>
                </li>
                <li class="">
                    
    <a class="" href="../using_car/">Using Car</a>
                </li>
                <li class="">
                    
    <a class="" href="../remote_control/">Remote Control</a>
                </li>
                <li class="">
                    
    <a class="" href="../xbox_controller/">XBox Controller</a>
                </li>
                <li class="">
                    
    <a class="" href="../steering_wheel_installation/">Steering Wheel</a>
                </li>
                <li class="">
                    
    <a class="" href="../multi_vehicle/">Multiple Vehicles</a>
                </li>
                <li class="">
                    
    <a class="" href="../sensors/">Sensors</a>
                </li>
                <li class="">
                    
    <a class="" href="../lidar/">LIDAR</a>
                </li>
                <li class="">
                    
    <a class="" href="../ros/">ROS</a>
                </li>
                <li class="">
                    
    <a class="" href="../playback/">Playing Logs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Design</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../design/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../code_structure/">Code Structure</a>
                </li>
                <li class="">
                    
    <a class="" href="../coding_guidelines/">Coding Guidelines</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Flight Controller</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#flight-controller">Flight Controller</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#what-is-flight-controller">What is Flight Controller?</a></li>
        
            <li><a class="toctree-l4" href="#how-simulator-uses-flight-controller">How Simulator uses Flight Controller?</a></li>
        
            <li><a class="toctree-l4" href="#what-is-hardware-and-software-in-loop">What is Hardware- and Software-in-Loop?</a></li>
        
            <li><a class="toctree-l4" href="#what-flight-controllers-are-supported">What Flight Controllers are Supported?</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../simple_flight/">Simple Flight</a>
                </li>
                <li class="">
                    
    <a class="" href="../hello_drone/">Hello Drone</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">MavLink and PX4</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../px4_setup/">PX4 Setup for AirSim</a>
                </li>
                <li class="">
                    
    <a class="" href="../px4_sitl/">PX4 in SITL</a>
                </li>
                <li class="">
                    
    <a class="" href="https://youtu.be/1oY8Qu5maQQ">AirSim with Pixhawk</a>
                </li>
                <li class="">
                    
    <a class="" href="https://youtu.be/HNWdYrtw3f0">PX4 Setup with AirSim</a>
                </li>
                <li class="">
                    
    <a class="" href="https://www.youtube.com/watch?v=d_FyjKDWQfc&feature=youtu.be">Debugging Attitude Estimation</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/Microsoft/AirSim/wiki/Intercepting-MavLink-messages">Intercepting MavLink Messages</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/Microsoft/AirSim/wiki/Rapid-Descent-on-PX4-drones">Rapid Descent on PX4 Drones</a>
                </li>
                <li class="">
                    
    <a class="" href="../px4_build/">Building PX4</a>
                </li>
                <li class="">
                    
    <a class="" href="../px4_logging/">PX4/MavLink Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../log_viewer/">MavLink LogViewer</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Upgrading</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../unreal_upgrade/">Upgrading Unreal</a>
                </li>
                <li class="">
                    
    <a class="" href="../upgrade_apis/">Upgrading APIs</a>
                </li>
                <li class="">
                    
    <a class="" href="../upgrade_settings/">Upgrading Settings</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Contributed Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../reinforcement_learning/">Reinforcement Learning</a>
                </li>
                <li class="">
                    
    <a class="" href="https://www.youtube.com/watch?v=y09VbdQWvQY">Using Environments from Marketplace</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/simondlevy/AirSimTensorFlow">Simple Collision Avoidance</a>
                </li>
                <li class="">
                    
    <a class="" href="https://aka.ms/AutonomousDrivingCookbook">Autonomous Driving on Azure</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/Microsoft/AirSim/wiki/hexacopter">Building Hexacopter</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/Microsoft/AirSim/wiki/moveOnPath-demo">Moving on Path Demo</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/Microsoft/AirSim/wiki/Point-Clouds">Building Point Clouds</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/Microsoft/AirSim/wiki/Implementing-a-Drone-Survey-script">Surveying Using Drone</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Misc</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../custom_drone/">AirSim on Real Drones</a>
                </li>
                <li class="">
                    
    <a class="" href="../cmake_linux/">Installing cmake on Linux</a>
                </li>
                <li class="">
                    
    <a class="" href="../hard_drive/">Tips for Busy HDD</a>
                </li>
                <li class="">
                    
    <a class="" href="../pfm/">pfm format</a>
                </li>
                <li class="">
                    
    <a class="" href="../unreal_proj/">Setting up Unreal Environment</a>
                </li>
                <li class="">
                    
    <a class="" href="../unreal_blocks/">Blocks Environment</a>
                </li>
                <li class="">
                    
    <a class="" href="../who_is_using/">Who is Using AirSim</a>
                </li>
                <li class="">
                    
    <a class="" href="../working_with_plugin_contents/">Working with UE Plugin Contents</a>
                </li>
                <li class="">
                    
    <a class="" href="https://github.com/Microsoft/AirSim/wiki/technion">Formula Student Technion Self-drive</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Support</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../faq/">FAQ</a>
                </li>
                <li class="">
                    
    <a class="" href="../../SUPPORT/">Support</a>
                </li>
                <li class="">
                    
    <a class="" href="../create_issue/">Create Issue</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CONTRIBUTING/">Contribute</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">AirSim</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Design &raquo;</li>
        
      
    
    <li>Flight Controller</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/microsoft/airsim/edit/master/docs/docs/flight_controller.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="flight-controller">Flight Controller</h1>
<h2 id="what-is-flight-controller">What is Flight Controller?</h2>
<p>"Wait!" you ask, "Why do you need flight controller for a simulator?". The primary job of flight controller is to take in <em>desired state</em> as input, estimate <em>actual state</em> using sensors data and then drive the actuators in such a way so that actual state comes as close to the desired state. For quadrotors, desired state can be specified as roll, pitch and yaw, for example. It then estimates actual roll, pitch and yaw using gyroscope and accelerometer. Then it generates appropriate motor signals so actual state becomes desired state. You can find more in-depth in <a href="../paper/main.pdf">our paper</a>.</p>
<h2 id="how-simulator-uses-flight-controller">How Simulator uses Flight Controller?</h2>
<p>Simulator consumes the motor signals generated by flight controller to figure out force and thrust generated by each actuator (i.e. propellers in case of quadrotor). This is then used by the physics engine to compute the kinetic properties of the vehicle. This in turn generates simulated sensor data and feed it back to the flight controller. You can find more in-depth in <a href="../paper/main.pdf">our paper</a>.</p>
<h2 id="what-is-hardware-and-software-in-loop">What is Hardware- and Software-in-Loop?</h2>
<p>Hardware-in-Loop (HITL or HIL) means flight controller runs in actual hardware such as Naze32 or Pixhawk chip. You then connect this hardware to PC using USB port. Simulator talks to the device to retrieve actuator signals and send it simulated sensor data. This is obviously as close as you can get to real thing. However, it typically requires more steps to set up and usually hard to debug. One big issue is that simulator clock and device clock runs on their own speed and accuracy. Also, USB connection (which is usually only USB 2.0) may not be enough for real-time communication.</p>
<p>In "software-in-loop" simulation (SITL or SIL) mode the firmware runs in your computer as opposed to separate board. This is generally fine except that now you are not touching any code paths that are specific to your device. Also, none of your code now runs with real-time clock usually provided by specialized hardware board. For well-designed flight controllers with software clock, these are usually not concerning issues.</p>
<h2 id="what-flight-controllers-are-supported">What Flight Controllers are Supported?</h2>
<p>AirSim has built-in flight controller called <a href="../simple_flight/">simple_flight</a> and it is used by default. You don't need to do anything to use or configure it. AirSim also supports <a href="../px4_setup/">PX4</a> as another flight controller for advanced users. In the future, we also plan to support <a href="https://rosflight.org/">ROSFlight</a> and <a href="https://github.com/simondlevy/hackflight">Hackflight</a>.</p>
<p>## Using AirSim Without Flight Controller
Yes, now it's possible to use AirSim without flight controller. Please see the <a href="../image_apis/">instructions here</a> for how to use so-called "Computer Vision" mode. If you don't need vehicle dynamics, we highly recommend using this mode.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../simple_flight/" class="btn btn-neutral float-right" title="Simple Flight">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../coding_guidelines/" class="btn btn-neutral" title="Coding Guidelines"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2018 Microsoft Research</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/microsoft/airsim/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../coding_guidelines/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../simple_flight/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
